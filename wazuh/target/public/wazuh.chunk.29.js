(window["wazuh_bundle_jsonpfunction"]=window["wazuh_bundle_jsonpfunction"]||[]).push([[29],{1928:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var angular_sanitize=__webpack_require__(265);var angular_route=__webpack_require__(606);var external_kbnSharedDeps_Lodash_=__webpack_require__(17);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);var external_kbnSharedDeps_React_=__webpack_require__(2);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_Rxjs_=__webpack_require__(14);var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(15);var external_kbnSharedDeps_Moment_=__webpack_require__(102);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);var elastic_datemath=__webpack_require__(136);var elastic_datemath_default=__webpack_require__.n(elastic_datemath);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(99);var kibana_utils_public=__webpack_require__(125);var data_public=__webpack_require__(122);function migrateLegacyQuery(query){if(!Object(external_kbnSharedDeps_Lodash_["has"])(query,"language")){return{query:query,language:"lucene"}}return query}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var APP_STATE_URL_KEY="_a";function getState(_ref){var _ref$defaultAppState=_ref.defaultAppState,defaultAppState=_ref$defaultAppState===void 0?{}:_ref$defaultAppState,_ref$storeInSessionSt=_ref.storeInSessionStorage,storeInSessionStorage=_ref$storeInSessionSt===void 0?false:_ref$storeInSessionSt,history=_ref.history,toasts=_ref.toasts;var stateStorage=Object(kibana_utils_public["g"])(_objectSpread({useHash:storeInSessionStorage,history:history},toasts&&Object(kibana_utils_public["t"])(toasts)));var appStateFromUrl=stateStorage.get(APP_STATE_URL_KEY);if(appStateFromUrl&&appStateFromUrl.query&&!appStateFromUrl.query.language){appStateFromUrl.query=migrateLegacyQuery(appStateFromUrl.query)}var initialAppState=_objectSpread(_objectSpread({},defaultAppState),appStateFromUrl);var previousAppState;var appStateContainer=Object(kibana_utils_public["j"])(initialAppState);var appStateContainerModified=_objectSpread(_objectSpread({},appStateContainer),{},{set:function set(value){if(value){previousAppState=appStateContainer.getState();appStateContainer.set(value)}}});var _syncState=Object(kibana_utils_public["p"])({storageKey:APP_STATE_URL_KEY,stateContainer:appStateContainerModified,stateStorage:stateStorage}),start=_syncState.start,stop=_syncState.stop;return{kbnUrlStateStorage:stateStorage,appStateContainer:appStateContainerModified,startSync:start,stopSync:stop,setAppState:function setAppState(newPartial){return setState(appStateContainerModified,newPartial)},replaceUrlAppState:function(){var _replaceUrlAppState=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var newPartial,state,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:newPartial=_args.length>0&&_args[0]!==undefined?_args[0]:{};state=_objectSpread(_objectSpread({},appStateContainer.getState()),newPartial);_context.next=4;return stateStorage.set(APP_STATE_URL_KEY,state,{replace:true});case 4:case"end":return _context.stop()}}}),_callee)})));function replaceUrlAppState(){return _replaceUrlAppState.apply(this,arguments)}return replaceUrlAppState}(),resetInitialAppState:function resetInitialAppState(){initialAppState=appStateContainer.getState()},getPreviousAppState:function getPreviousAppState(){return previousAppState},flushToUrl:function flushToUrl(){return stateStorage.flush()},isAppStateDirty:function isAppStateDirty(){return!isEqualState(initialAppState,appStateContainer.getState())}}}function setState(stateContainer,newState){var oldState=stateContainer.getState();var mergedState=_objectSpread(_objectSpread({},oldState),newState);if(!isEqualState(oldState,mergedState)){stateContainer.set(mergedState)}}function isEqualFilters(filtersA,filtersB){if(!filtersA&&!filtersB){return true}else if(!filtersA||!filtersB){return false}return data_public["f"].compareFilters(filtersA,filtersB,data_public["f"].COMPARE_ALL_OPTIONS)}function splitState(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _state$filters=state.filters,filters=_state$filters===void 0?[]:_state$filters,statePartial=_objectWithoutProperties(state,["filters"]);return{filters:filters,state:statePartial}}function isEqualState(stateA,stateB){if(!stateA&&!stateB){return true}else if(!stateA||!stateB){return false}var _stateA$filters=stateA.filters,stateAFilters=_stateA$filters===void 0?[]:_stateA$filters,stateAPartial=_objectWithoutProperties(stateA,["filters"]);var _stateB$filters=stateB.filters,stateBFilters=_stateB$filters===void 0?[]:_stateB$filters,stateBPartial=_objectWithoutProperties(stateB,["filters"]);return Object(external_kbnSharedDeps_Lodash_["isEqual"])(stateAPartial,stateBPartial)&&isEqualFilters(stateAFilters,stateBFilters)}var inspector_public=__webpack_require__(206);var saved_objects_public=__webpack_require__(171);var doc_table=__webpack_require__(323);var external_kbnSharedDeps_Jquery_=__webpack_require__(104);var external_kbnSharedDeps_Jquery_default=__webpack_require__.n(external_kbnSharedDeps_Jquery_);function createDebounceProviderTimeout($timeout){return function(func,wait,options){var timeout;var args;var self;var result;options=external_kbnSharedDeps_Lodash_default.a.defaults(options||{},{leading:false,trailing:true,invokeApply:true});function debounce(){self=this;args=arguments;var later=function later(){timeout=null;if(!options.leading||options.trailing){result=func.apply(self,args)}};var callNow=options.leading&&!timeout;if(timeout){$timeout.cancel(timeout)}timeout=$timeout(later,wait,options.invokeApply);if(callNow){result=func.apply(self,args)}return result}debounce.cancel=function(){$timeout.cancel(timeout);timeout=null};return debounce}}var SCROLLER_HEIGHT=20;function FixedScrollProvider($timeout){return{restrict:"A",link:function link($scope,$el){return createFixedScroll($scope,$timeout)($el)}}}function createFixedScroll($scope,$timeout){var debounce=createDebounceProviderTimeout($timeout);return function(el){var $el=typeof el.css==="function"?el:external_kbnSharedDeps_Jquery_default()(el);var $window=external_kbnSharedDeps_Jquery_default()(window);var $scroller=external_kbnSharedDeps_Jquery_default()('<div class="dscTableFixedScroll__scroller">').height(SCROLLER_HEIGHT);var unlisten=external_kbnSharedDeps_Lodash_default.a.noop;function listen(){if(unlisten!==external_kbnSharedDeps_Lodash_default.a.noop){throw new Error("fixedScroll listeners were not cleaned up properly before re-listening!")}var blockTo;function bind($from,$to){function handler(){if(blockTo===$to)return blockTo=null;$to.scrollLeft((blockTo=$from).scrollLeft())}$from.on("scroll",handler);return function(){$from.off("scroll",handler)}}unlisten=external_kbnSharedDeps_Lodash_default.a.flow(bind($el,$scroller),bind($scroller,$el),(function(){unlisten=external_kbnSharedDeps_Lodash_default.a.noop}))}function cleanUp(){unlisten();$scroller.detach();$el.css("padding-bottom",0)}function setup(){cleanUp();var containerWidth=$el.width();var contentWidth=$el.prop("scrollWidth");var containerHorizOverflow=contentWidth-containerWidth;var elTop=$el.offset().top-$window.scrollTop();var elBottom=elTop+$el.height();var windowVertOverflow=elBottom-$window.height();var requireScroller=containerHorizOverflow>0&&windowVertOverflow>0;if(!requireScroller)return;$el.css("padding-bottom",SCROLLER_HEIGHT);$scroller.width(containerWidth).html(external_kbnSharedDeps_Jquery_default()("<div>").css({width:contentWidth,height:SCROLLER_HEIGHT})).insertAfter($el);listen()}var width;var scrollWidth;function checkWidth(){var newScrollWidth=$el.prop("scrollWidth");var newWidth=$el.width();if(scrollWidth!==newScrollWidth||width!==newWidth){$scope.$apply(setup);scrollWidth=newScrollWidth;width=newWidth}}var debouncedCheckWidth=debounce(checkWidth,100,{invokeApply:false});$scope.$watch(debouncedCheckWidth);function destroy(){cleanUp();debouncedCheckWidth.cancel();$scroller=$window=null}return destroy}}var actions_columns=__webpack_require__(463);var discover_legacy='<discover-app>\n  <discover-legacy\n    add-column="addColumn"\n    fetch="fetch"\n    fetch-counter="fetchCounter"\n    fetch-error="fetchError"\n    field-counts="fieldCounts"\n    histogram-data="histogramData"\n    hits="hits"\n    index-pattern="indexPattern"\n    minimum-visible-rows="minimumVisibleRows"\n    on-add-filter="filterQuery"\n    on-move-column="moveColumn"\n    on-change-interval="changeInterval"\n    on-remove-column="removeColumn"\n    on-set-columns="setColumns"\n    on-skip-bottom-button-click="onSkipBottomButtonClick"\n    on-sort="setSortOrder"\n    opts="opts"\n    reset-query="resetQuery"\n    result-state="resultState"\n    rows="rows"\n    saved-search="savedSearch"\n    search-source="searchSource"\n    set-index-pattern="setIndexPattern"\n    show-save-query="showSaveQuery"\n    state="state"\n    time-filter-update-handler="timefilterUpdateHandler"\n    time-range="timeRange"\n    top-nav-menu="topNavMenu"\n    update-query="handleRefresh"\n    update-saved-query-id="updateSavedQueryId"\n    vis="vis"\n  >\n  </discover-legacy>\n</discover-app>\n';var external_kbnSharedDeps_ReactDom_=__webpack_require__(101);var external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_);var rison=__webpack_require__(186);var rison_default=__webpack_require__.n(rison);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(100);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(98);var kibana_services=__webpack_require__(127);var SEARCH_OBJECT_TYPE="search";function OpenSearchPanel(props){var _getServices=Object(kibana_services["h"])(),_getServices$core=_getServices.core,uiSettings=_getServices$core.uiSettings,savedObjects=_getServices$core.savedObjects,addBasePath=_getServices.addBasePath;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{ownFocus:true,onClose:props.onClose,"data-test-subj":"loadSearchForm"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.topNav.openSearchPanel.openSearchTitle",defaultMessage:"Open search"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,external_kbnSharedDeps_React_default.a.createElement(saved_objects_public["a"],{noItemsMessage:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.topNav.openSearchPanel.noSearchesFoundDescription",defaultMessage:"No matching searches found."}),savedObjectMetaData:[{type:SEARCH_OBJECT_TYPE,getIconForSavedObject:function getIconForSavedObject(){return"search"},name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.savedSearch.savedObjectName",{defaultMessage:"Saved search"})}],onChoose:function onChoose(id){window.location.assign(props.makeUrl(id));props.onClose()},uiSettings:uiSettings,savedObjects:savedObjects})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:props.onClose,href:addBasePath("/app/management/kibana/objects?_a=".concat(rison_default.a.encode({tab:SEARCH_OBJECT_TYPE})))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.topNav.openSearchPanel.manageSearchesButtonLabel",defaultMessage:"Manage searches"}))))))}var isOpen=false;function showOpenSearchPanel(_ref){var makeUrl=_ref.makeUrl,I18nContext=_ref.I18nContext;if(isOpen){return}isOpen=true;var container=document.createElement("div");var onClose=function onClose(){external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(container);document.body.removeChild(container);isOpen=false};document.body.appendChild(container);var element=external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(OpenSearchPanel,{onClose:onClose,makeUrl:makeUrl}));external_kbnSharedDeps_ReactDom_default.a.render(element,container)}var help_menu_util_getServices=Object(kibana_services["h"])(),docLinks=help_menu_util_getServices.docLinks;function addHelpMenuToAppChrome(chrome){chrome.setHelpExtension({appName:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.helpMenu.appName",{defaultMessage:"Discover"}),links:[{linkType:"documentation",href:"".concat(docLinks.ELASTIC_WEBSITE_URL,"guide/en/kibana/").concat(docLinks.DOC_LINK_VERSION,"/discover.html")}]})}var point_series_buildPointSeriesData=function buildPointSeriesData(table,dimensions){var x=dimensions.x,y=dimensions.y;var xAccessor=table.columns[x.accessor].id;var yAccessor=table.columns[y.accessor].id;var chart={};chart.xAxisOrderedValues=Object(external_kbnSharedDeps_Lodash_["uniq"])(table.rows.map((function(r){return r[xAccessor]})));chart.xAxisFormat=x.format;chart.xAxisLabel=table.columns[x.accessor].name;var _x$params=x.params,intervalESUnit=_x$params.intervalESUnit,intervalESValue=_x$params.intervalESValue,interval=_x$params.interval,bounds=_x$params.bounds;chart.ordered={date:true,interval:interval,intervalESUnit:intervalESUnit,intervalESValue:intervalESValue,min:bounds.min,max:bounds.max};chart.yAxisLabel=table.columns[y.accessor].name;chart.values=table.rows.filter((function(row){return row&&row[yAccessor]!=="NaN"})).map((function(row){return{x:row[xAccessor],y:row[yAccessor]}}));return chart};function tableResponseHandler(table,dimensions){var converted={tables:[]};var split=dimensions.splitColumn||dimensions.splitRow;if(split){converted.direction=dimensions.splitRow?"row":"column";var splitColumnIndex=split[0].accessor;var splitColumnFormatter=Object(kibana_services["h"])().data.fieldFormats.deserialize(split[0].format);var splitColumn=table.columns[splitColumnIndex];var splitMap={};var splitIndex=0;table.rows.forEach((function(row,rowIndex){var splitValue=row[splitColumn.id];if(!splitMap.hasOwnProperty(splitValue)){splitMap[splitValue]=splitIndex++;var tableGroup={$parent:converted,title:"".concat(splitColumnFormatter.convert(splitValue),": ").concat(splitColumn.name),name:splitColumn.name,key:splitValue,column:splitColumnIndex,row:rowIndex,table:table,tables:[]};tableGroup.tables.push({$parent:tableGroup,columns:table.columns,rows:[]});converted.tables.push(tableGroup)}var tableIndex=splitMap[splitValue];converted.tables[tableIndex].tables[0].rows.push(row)}))}else{converted.tables.push({columns:table.columns,rows:table.rows})}return converted}function convertTableGroup(tableGroup,convertTable){var tables=tableGroup.tables;if(!tables.length)return;var firstChild=tables[0];if(firstChild.columns){var chart=convertTable(firstChild);if(tableGroup.$parent){chart.label=tableGroup.title}return chart}var out={};var outList;tables.forEach((function(table){if(!outList){var direction=tableGroup.direction==="row"?"rows":"columns";outList=out[direction]=[]}var output;if(output=convertTableGroup(table,convertTable)){outList.push(output)}}));return out}var response_handler_discoverResponseHandler=function discoverResponseHandler(response,dimensions){var tableGroup=tableResponseHandler(response,dimensions);var converted=convertTableGroup(tableGroup,(function(table){return point_series_buildPointSeriesData(table,dimensions)}));if(!converted){converted={rows:[]}}converted.hits=response.rows.length;return converted};function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function getRootBreadcrumbs(){return[{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.rootBreadcrumb",{defaultMessage:"Discover"}),href:"#/"}]}function getSavedSearchBreadcrumbs($route){return[].concat(_toConsumableArray(getRootBreadcrumbs()),[{text:$route.current.locals.savedObjects.savedSearch.id}])}function validateTimeRange(_ref,toastNotifications){var from=_ref.from,to=_ref.to;var fromMoment=elastic_datemath_default.a.parse(from);var toMoment=elastic_datemath_default.a.parse(to);if(!fromMoment||!toMoment||!fromMoment.isValid()||!toMoment.isValid()){toastNotifications.addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.notifications.invalidTimeRangeTitle",{defaultMessage:"Invalid time range"}),text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.notifications.invalidTimeRangeText",{defaultMessage:"The provided time range is invalid. (from: '{from}', to: '{to}')",values:{from:from,to:to}})});return false}return true}var popularize_field=__webpack_require__(689);function getSwitchIndexPatternAppState(currentIndexPattern,nextIndexPattern,currentColumns,currentSort){var modifyColumns=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var nextColumns=modifyColumns?currentColumns.filter((function(column){return nextIndexPattern.fields.getByName(column)||!currentIndexPattern.fields.getByName(column)})):currentColumns;var nextSort=Object(doc_table["b"])(currentSort,nextIndexPattern);return{index:nextIndexPattern.id,columns:nextColumns.length?nextColumns:["_source"],sort:nextSort}}function findIndexPatternById(indexPatterns,id){if(!Array.isArray(indexPatterns)||!id){return}return indexPatterns.find((function(o){return o.id===id}))}function getFallbackIndexPatternId(indexPatterns){var defaultIndex=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(defaultIndex&&findIndexPatternById(indexPatterns,defaultIndex)){return defaultIndex}return!indexPatterns||!indexPatterns.length||!indexPatterns[0].id?"":indexPatterns[0].id}function getIndexPatternId(){var id=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var indexPatterns=arguments.length>1?arguments[1]:undefined;var defaultIndex=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";if(!id||!findIndexPatternById(indexPatterns,id)){return getFallbackIndexPatternId(indexPatterns,defaultIndex)}return id}var kibana_legacy_public=__webpack_require__(151);var common=__webpack_require__(182);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||discover_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function discover_toConsumableArray(arr){return discover_arrayWithoutHoles(arr)||discover_iterableToArray(arr)||discover_unsupportedIterableToArray(arr)||discover_nonIterableSpread()}function discover_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function discover_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return discover_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return discover_arrayLikeToArray(o,minLen)}function discover_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function discover_arrayWithoutHoles(arr){if(Array.isArray(arr))return discover_arrayLikeToArray(arr)}function discover_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function discover_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function discover_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){discover_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){discover_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function discover_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function discover_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){discover_ownKeys(Object(source),true).forEach((function(key){discover_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{discover_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function discover_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var discover_getServices=Object(kibana_services["h"])(),core=discover_getServices.core,discover_chrome=discover_getServices.chrome,data=discover_getServices.data,getHistory=discover_getServices.history,discover_indexPatterns=discover_getServices.indexPatterns,discover_filterManager=discover_getServices.filterManager,share=discover_getServices.share,timefilter=discover_getServices.timefilter,discover_toastNotifications=discover_getServices.toastNotifications,config=discover_getServices.uiSettings,visualizations=discover_getServices.visualizations;var fetchStatuses={UNINITIALIZED:"uninitialized",LOADING:"loading",COMPLETE:"complete"};var app=Object(kibana_services["a"])();app.config((function($routeProvider){var defaults={requireDefaultIndex:true,requireUICapability:"discover.show",k7Breadcrumbs:function k7Breadcrumbs($route,$injector){return $injector.invoke($route.current.params.id?getSavedSearchBreadcrumbs:getRootBreadcrumbs)},badge:function badge(uiCapabilities){if(uiCapabilities.discover.save){return undefined}return{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.badge.readOnly.tooltip",{defaultMessage:"Unable to save searches"}),iconType:"glasses"}}};var discoverRoute=discover_objectSpread(discover_objectSpread({},defaults),{},{template:discover_legacy,reloadOnSearch:false,resolve:{savedObjects:function savedObjects($route,Promise){var history=getHistory();var savedSearchId=$route.current.params.id;return data.indexPatterns.ensureDefaultIndexPattern(history).then((function(){var _getState=getState({history:history}),appStateContainer=_getState.appStateContainer;var _appStateContainer$ge=appStateContainer.getState(),index=_appStateContainer$ge.index;return Promise.props({ip:discover_indexPatterns.getCache().then((function(indexPatternList){var id=getIndexPatternId(index,indexPatternList,config.get("defaultIndex"));return Promise.props({list:indexPatternList,loaded:discover_indexPatterns.get(id),stateVal:index,stateValFound:!!index&&id===index})})),savedSearch:Object(kibana_services["h"])().getSavedSearchById(savedSearchId).then((function(savedSearch){if(savedSearchId){discover_chrome.recentlyAccessed.add(savedSearch.getFullPath(),savedSearch.title,savedSearchId)}return savedSearch})).catch(Object(kibana_services["k"])({history:history,navigateToApp:core.application.navigateToApp,mapping:{search:"/","index-pattern":{app:"management",path:"kibana/objects/savedSearches/".concat($route.current.params.id)}},toastNotifications:discover_toastNotifications,onBeforeRedirect(){Object(kibana_services["j"])().setTrackedUrl("/")}}))})}))}}});$routeProvider.when("/view/:id?",discoverRoute);$routeProvider.when("/",discoverRoute)}));app.directive("discoverApp",(function(){return{restrict:"E",controllerAs:"discoverApp",controller:discoverController}}));function discoverController($element,$route,$scope,$timeout,$window,Promise,uiCapabilities){var _this=this;var isDefaultType=data_public["j"].isDefault;var subscriptions=new external_kbnSharedDeps_Rxjs_["Subscription"];var refetch$=new external_kbnSharedDeps_Rxjs_["Subject"];var inspectorRequest;var savedSearch=$route.current.locals.savedObjects.savedSearch;$scope.searchSource=savedSearch.searchSource;$scope.indexPattern=resolveIndexPatternLoading();$scope.fetchCounter=0;var getTimeField=function getTimeField(){return isDefaultType($scope.indexPattern)?$scope.indexPattern.timeFieldName:undefined};var history=getHistory();var _getState2=getState({defaultAppState:getStateDefaults(),storeInSessionStorage:config.get("state:storeInSessionStorage"),history:history,toasts:core.notifications.toasts}),appStateContainer=_getState2.appStateContainer,startStateSync=_getState2.startSync,stopStateSync=_getState2.stopSync,setAppState=_getState2.setAppState,replaceUrlAppState=_getState2.replaceUrlAppState,isAppStateDirty=_getState2.isAppStateDirty,kbnUrlStateStorage=_getState2.kbnUrlStateStorage,getPreviousAppState=_getState2.getPreviousAppState,resetInitialAppState=_getState2.resetInitialAppState;if(appStateContainer.getState().index!==$scope.indexPattern.id){setAppState({index:$scope.indexPattern.id})}$scope.state=discover_objectSpread({},appStateContainer.getState());var _syncQueryStateWithUr=Object(data_public["n"])(data.query,kbnUrlStateStorage),stopSyncingGlobalStateWithUrl=_syncQueryStateWithUr.stop;discover_filterManager.setAppFilters(external_kbnSharedDeps_Lodash_default.a.cloneDeep(appStateContainer.getState().filters));data.query.queryString.setQuery(appStateContainer.getState().query);var stopSyncingQueryAppStateWithStateContainer=Object(data_public["e"])(data.query,appStateContainer,{filters:data_public["f"].FilterStateStore.APP_STATE,query:true});var appStateUnsubscribe=appStateContainer.subscribe(function(){var _ref=discover_asyncToGenerator(regeneratorRuntime.mark((function _callee2(newState){var _splitState,newStatePartial,_splitState2,oldStatePartial;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_splitState=splitState(newState),newStatePartial=_splitState.state;_splitState2=splitState(getPreviousAppState()),oldStatePartial=_splitState2.state;if(!external_kbnSharedDeps_Lodash_default.a.isEqual(newStatePartial,oldStatePartial)){$scope.$evalAsync(discover_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var changes;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(oldStatePartial.index!==newStatePartial.index)){_context.next=2;break}return _context.abrupt("return");case 2:$scope.state=discover_objectSpread({},newState);changes=["interval","sort"].filter((function(prop){return!external_kbnSharedDeps_Lodash_default.a.isEqual(newStatePartial[prop],oldStatePartial[prop])}));if(changes.length){refetch$.next()}case 5:case"end":return _context.stop()}}}),_callee)}))))}case 3:case"end":return _context2.stop()}}}),_callee2)})));return function(_x){return _ref.apply(this,arguments)}}());var unlistenHistoryBasePath=history.listen((function(_ref3){var pathname=_ref3.pathname,search=_ref3.search,hash=_ref3.hash;if(!search&&!hash&&pathname==="/"){$route.reload()}}));$scope.setIndexPattern=function(){var _ref4=discover_asyncToGenerator(regeneratorRuntime.mark((function _callee3(id){var nextIndexPattern,nextAppState;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return discover_indexPatterns.get(id);case 2:nextIndexPattern=_context3.sent;if(!nextIndexPattern){_context3.next=8;break}nextAppState=getSwitchIndexPatternAppState($scope.indexPattern,nextIndexPattern,$scope.state.columns,$scope.state.sort,config.get(common["g"]));_context3.next=7;return replaceUrlAppState(nextAppState);case 7:$route.reload();case 8:case"end":return _context3.stop()}}}),_callee3)})));return function(_x2){return _ref4.apply(this,arguments)}}();subscriptions.add(Object(kibana_services["s"])($scope,discover_filterManager.getUpdates$(),{next:function next(){$scope.state.filters=discover_filterManager.getAppFilters();$scope.updateDataSource()}},(function(error){return Object(kibana_legacy_public["c"])(core.fatalErrors,error)})));var inspectorAdapters={requests:new inspector_public["RequestAdapter"]};$scope.timefilterUpdateHandler=function(ranges){timefilter.setTime({from:external_kbnSharedDeps_Moment_default()(ranges.from).toISOString(),to:external_kbnSharedDeps_Moment_default()(ranges.to).toISOString(),mode:"absolute"})};$scope.minimumVisibleRows=50;$scope.fetchStatus=fetchStatuses.UNINITIALIZED;$scope.showSaveQuery=uiCapabilities.discover.saveQuery;var abortController;$scope.$on("$destroy",(function(){if(abortController)abortController.abort();savedSearch.destroy();subscriptions.unsubscribe();appStateUnsubscribe();stopStateSync();stopSyncingGlobalStateWithUrl();stopSyncingQueryAppStateWithStateContainer();unlistenHistoryBasePath()}));var getTopNavLinks=function getTopNavLinks(){var newSearch={id:"new",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.localMenu.localMenu.newSearchTitle",{defaultMessage:"New"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.localMenu.newSearchDescription",{defaultMessage:"New Search"}),run:function run(){$scope.$evalAsync((function(){history.push("/")}))},testId:"discoverNewButton"};var saveSearch={id:"save",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.localMenu.saveTitle",{defaultMessage:"Save"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.localMenu.saveSearchDescription",{defaultMessage:"Save Search"}),testId:"discoverSaveButton",run:function(){var _run=discover_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var onSave,saveModal;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:onSave=function onSave(_ref5){var newTitle=_ref5.newTitle,newCopyOnSave=_ref5.newCopyOnSave,isTitleDuplicateConfirmed=_ref5.isTitleDuplicateConfirmed,onTitleDuplicate=_ref5.onTitleDuplicate;var currentTitle=savedSearch.title;savedSearch.title=newTitle;savedSearch.copyOnSave=newCopyOnSave;var saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return saveDataSource(saveOptions).then((function(response){if(!response.id||response.error){savedSearch.title=currentTitle}else{resetInitialAppState()}return response}))};saveModal=external_kbnSharedDeps_React_default.a.createElement(saved_objects_public["c"],{onSave:onSave,onClose:function onClose(){},title:savedSearch.title,showCopyOnSave:!!savedSearch.id,objectType:"search",description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.localMenu.saveSaveSearchDescription",{defaultMessage:"Save your Discover search so you can use it in visualizations and dashboards"}),showDescription:false});Object(saved_objects_public["g"])(saveModal,core.i18n.Context);case 3:case"end":return _context4.stop()}}}),_callee4)})));function run(){return _run.apply(this,arguments)}return run}()};var openSearch={id:"open",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.localMenu.openTitle",{defaultMessage:"Open"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.localMenu.openSavedSearchDescription",{defaultMessage:"Open Saved Search"}),testId:"discoverOpenButton",run:function run(){showOpenSearchPanel({makeUrl:function makeUrl(searchId){return"#/view/".concat(encodeURIComponent(searchId))},I18nContext:core.i18n.Context})}};var shareSearch={id:"share",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.localMenu.shareTitle",{defaultMessage:"Share"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.localMenu.shareSearchDescription",{defaultMessage:"Share Search"}),testId:"shareTopNavButton",run:function(){var _run2=discover_asyncToGenerator(regeneratorRuntime.mark((function _callee5(anchorElement){var sharingData;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _this.getSharingData();case 2:sharingData=_context5.sent;share.toggleShareContextMenu({anchorElement:anchorElement,allowEmbed:false,allowShortUrl:uiCapabilities.discover.createShortUrl,shareableUrl:Object(kibana_services["v"])(window.location.href),objectId:savedSearch.id,objectType:"search",sharingData:discover_objectSpread(discover_objectSpread({},sharingData),{},{title:savedSearch.title}),isDirty:!savedSearch.id||isAppStateDirty()});case 4:case"end":return _context5.stop()}}}),_callee5)})));function run(_x3){return _run2.apply(this,arguments)}return run}()};var inspectSearch={id:"inspect",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.localMenu.inspectTitle",{defaultMessage:"Inspect"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.localMenu.openInspectorForSearchDescription",{defaultMessage:"Open Inspector for search"}),testId:"openInspectorButton",run(){Object(kibana_services["h"])().inspector.open(inspectorAdapters,{title:savedSearch.title})}};return[newSearch].concat(discover_toConsumableArray(uiCapabilities.discover.save?[saveSearch]:[]),[openSearch,shareSearch,inspectSearch])};$scope.topNavMenu=getTopNavLinks();$scope.searchSource.setField("index",$scope.indexPattern).setField("highlightAll",true).setField("version",true);$scope.searchSource.setPreferredSearchStrategyId("default");var timeRangeSearchSource=savedSearch.searchSource.create();if(isDefaultType($scope.indexPattern)){timeRangeSearchSource.setField("filter",(function(){return timefilter.createFilter($scope.indexPattern)}))}$scope.searchSource.setParent(timeRangeSearchSource);var pageTitleSuffix=savedSearch.id&&savedSearch.title?": ".concat(savedSearch.title):"";discover_chrome.docTitle.change("Discover".concat(pageTitleSuffix));var discoverBreadcrumbsTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.discoverBreadcrumbTitle",{defaultMessage:"Discover"});if(savedSearch.id&&savedSearch.title){discover_chrome.setBreadcrumbs([{text:discoverBreadcrumbsTitle,href:"#/"},{text:savedSearch.title}])}else{discover_chrome.setBreadcrumbs([{text:discoverBreadcrumbsTitle}])}var getFieldCounts=function(){var _ref6=discover_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!($scope.fetchStatus===fetchStatuses.COMPLETE)){_context6.next=2;break}return _context6.abrupt("return",$scope.fieldCounts);case 2:_context6.next=4;return new Promise((function(resolve){var unwatch=$scope.$watch("fetchStatus",(function(newValue){if(newValue===fetchStatuses.COMPLETE){unwatch();resolve($scope.fieldCounts)}}))}));case 4:return _context6.abrupt("return",_context6.sent);case 5:case"end":return _context6.stop()}}}),_callee6)})));return function getFieldCounts(){return _ref6.apply(this,arguments)}}();var getSharingDataFields=function(){var _ref7=discover_asyncToGenerator(regeneratorRuntime.mark((function _callee7(selectedFields,timeFieldName,hideTimeColumn){var fieldCounts,fields;return regeneratorRuntime.wrap((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!(selectedFields.length===1&&selectedFields[0]==="_source")){_context7.next=5;break}_context7.next=3;return getFieldCounts();case 3:fieldCounts=_context7.sent;return _context7.abrupt("return",{searchFields:null,selectFields:external_kbnSharedDeps_Lodash_default.a.keys(fieldCounts).sort()});case 5:fields=timeFieldName&&!hideTimeColumn?[timeFieldName].concat(discover_toConsumableArray(selectedFields)):selectedFields;return _context7.abrupt("return",{searchFields:fields,selectFields:fields});case 7:case"end":return _context7.stop()}}}),_callee7)})));return function getSharingDataFields(_x4,_x5,_x6){return _ref7.apply(this,arguments)}}();this.getSharingData=discover_asyncToGenerator(regeneratorRuntime.mark((function _callee8(){var searchSource,_yield$getSharingData,searchFields,selectFields,body;return regeneratorRuntime.wrap((function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:searchSource=$scope.searchSource.createCopy();_context8.next=3;return getSharingDataFields($scope.state.columns,$scope.indexPattern.timeFieldName,config.get(common["e"]));case 3:_yield$getSharingData=_context8.sent;searchFields=_yield$getSharingData.searchFields;selectFields=_yield$getSharingData.selectFields;searchSource.setField("fields",searchFields);searchSource.setField("sort",Object(doc_table["c"])($scope.state.sort,$scope.indexPattern,config.get(common["j"])));searchSource.setField("highlight",null);searchSource.setField("highlightAll",null);searchSource.setField("aggs",null);searchSource.setField("size",null);_context8.next=14;return searchSource.getSearchRequestBody();case 14:body=_context8.sent;return _context8.abrupt("return",{searchRequest:{index:searchSource.getField("index").title,body:body},fields:selectFields,metaFields:$scope.indexPattern.metaFields,conflictedTypesFields:$scope.indexPattern.fields.filter((function(f){return f.type==="conflict"})).map((function(f){return f.name})),indexPatternId:searchSource.getField("index").id});case 16:case"end":return _context8.stop()}}}),_callee8)})));function getStateDefaults(){var query=$scope.searchSource.getField("query")||data.query.queryString.getDefaultQuery();return{query:query,sort:Object(doc_table["b"])(savedSearch.sort,$scope.indexPattern),columns:savedSearch.columns.length>0?savedSearch.columns:config.get(common["d"]).slice(),index:$scope.indexPattern.id,interval:"auto",filters:external_kbnSharedDeps_Lodash_default.a.cloneDeep($scope.searchSource.getOwnField("filter"))}}$scope.state.index=$scope.indexPattern.id;$scope.state.sort=Object(doc_table["b"])($scope.state.sort,$scope.indexPattern);$scope.opts={sampleSize:config.get(common["h"]),timefield:getTimeField(),savedSearch:savedSearch,indexPatternList:$route.current.locals.savedObjects.ip.list,config:config,fixedScroll:createFixedScroll($scope,$timeout),setHeaderActionMenu:Object(kibana_services["c"])()};var shouldSearchOnPageLoad=function shouldSearchOnPageLoad(){return config.get(common["i"])||savedSearch.id!==undefined||timefilter.getRefreshInterval().pause===false};var init=external_kbnSharedDeps_Lodash_default.a.once((function(){$scope.updateDataSource().then(discover_asyncToGenerator(regeneratorRuntime.mark((function _callee9(){var fetch$;return regeneratorRuntime.wrap((function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:fetch$=Object(external_kbnSharedDeps_Rxjs_["merge"])(refetch$,discover_filterManager.getFetches$(),timefilter.getFetch$(),timefilter.getAutoRefreshFetch$(),data.query.queryString.getUpdates$()).pipe(Object(external_kbnSharedDeps_RxjsOperators_["debounceTime"])(100));subscriptions.add(Object(kibana_services["s"])($scope,fetch$,{next:$scope.fetch},(function(error){return Object(kibana_legacy_public["c"])(core.fatalErrors,error)})));subscriptions.add(Object(kibana_services["s"])($scope,timefilter.getTimeUpdate$(),{next:function next(){$scope.updateTime()}},(function(error){return Object(kibana_legacy_public["c"])(core.fatalErrors,error)})));$scope.changeInterval=function(interval){if(interval){setAppState({interval:interval})}};$scope.$watchMulti(["rows","fetchStatus"],function updateResultState(){var prev={};var status={UNINITIALIZED:"uninitialized",LOADING:"loading",READY:"ready",NO_RESULTS:"none"};function pick(rows,oldRows,fetchStatus){if(rows==null&&oldRows==null&&shouldSearchOnPageLoad()){return status.LOADING}if(fetchStatus===fetchStatuses.UNINITIALIZED){return status.UNINITIALIZED}var rowsEmpty=external_kbnSharedDeps_Lodash_default.a.isEmpty(rows);if(rowsEmpty&&fetchStatus===fetchStatuses.LOADING)return status.LOADING;else if(!rowsEmpty)return status.READY;else return status.NO_RESULTS}return function(){var current={rows:$scope.rows,fetchStatus:$scope.fetchStatus};$scope.resultState=pick(current.rows,prev.rows,current.fetchStatus,prev.fetchStatus);prev=current}}());if(getTimeField()){setupVisualization();$scope.updateTime()}init.complete=true;if(shouldSearchOnPageLoad()){refetch$.next()}case 8:case"end":return _context9.stop()}}}),_callee9)}))))}));function saveDataSource(_x7){return _saveDataSource.apply(this,arguments)}function _saveDataSource(){_saveDataSource=discover_asyncToGenerator(regeneratorRuntime.mark((function _callee10(saveOptions){var id;return regeneratorRuntime.wrap((function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return $scope.updateDataSource();case 2:savedSearch.columns=$scope.state.columns;savedSearch.sort=$scope.state.sort;_context10.prev=4;_context10.next=7;return savedSearch.save(saveOptions);case 7:id=_context10.sent;$scope.$evalAsync((function(){if(id){discover_toastNotifications.addSuccess({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.notifications.savedSearchTitle",{defaultMessage:"Search '{savedSearchTitle}' was saved",values:{savedSearchTitle:savedSearch.title}}),"data-test-subj":"saveSearchSuccess"});if(savedSearch.id!==$route.current.params.id){history.push("/view/".concat(encodeURIComponent(savedSearch.id)))}else{setAppState(getStateDefaults());discover_chrome.docTitle.change(savedSearch.lastSavedTitle);discover_chrome.setBreadcrumbs([{text:discoverBreadcrumbsTitle,href:"#/"},{text:savedSearch.title}])}}}));return _context10.abrupt("return",{id:id});case 12:_context10.prev=12;_context10.t0=_context10["catch"](4);discover_toastNotifications.addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.notifications.notSavedSearchTitle",{defaultMessage:"Search '{savedSearchTitle}' was not saved.",values:{savedSearchTitle:savedSearch.title}}),text:_context10.t0.message});return _context10.abrupt("return",{error:_context10.t0});case 16:case"end":return _context10.stop()}}}),_callee10,null,[[4,12]])})));return _saveDataSource.apply(this,arguments)}$scope.opts.fetch=$scope.fetch=function(){if(!init.complete)return;$scope.fetchCounter++;$scope.fetchError=undefined;$scope.minimumVisibleRows=50;if(!validateTimeRange(timefilter.getTime(),discover_toastNotifications)){$scope.resultState="none";return}if(abortController)abortController.abort();abortController=new AbortController;$scope.updateDataSource().then(setupVisualization).then((function(){$scope.fetchStatus=fetchStatuses.LOADING;logInspectorRequest();return $scope.searchSource.fetch({abortSignal:abortController.signal})})).then(onResults).catch((function(error){if(error instanceof Error&&error.name==="AbortError")return;$scope.fetchStatus=fetchStatuses.NO_RESULTS;$scope.rows=[];data.search.showError(error)}))};$scope.handleRefresh=function(_payload,isUpdate){if(isUpdate===false){refetch$.next()}};$scope.updateSavedQueryId=function(newSavedQueryId){if(newSavedQueryId){setAppState({savedQuery:newSavedQueryId})}else{var state=discover_objectSpread({},appStateContainer.getState());delete state.savedQuery;appStateContainer.set(state)}};function getDimensions(aggs,timeRange){var _aggs=_slicedToArray(aggs,2),metric=_aggs[0],agg=_aggs[1];agg.params.timeRange=timeRange;var bounds=agg.params.timeRange?timefilter.calculateBounds(agg.params.timeRange):null;agg.buckets.setBounds(bounds);var _agg$buckets$getInter=agg.buckets.getInterval(),esUnit=_agg$buckets$getInter.esUnit,esValue=_agg$buckets$getInter.esValue;return{x:{accessor:0,label:agg.makeLabel(),format:agg.toSerializedFieldFormat(),params:{date:true,interval:external_kbnSharedDeps_Moment_default.a.duration(esValue,esUnit),intervalESValue:esValue,intervalESUnit:esUnit,format:agg.buckets.getScaledDateFormat(),bounds:agg.buckets.getBounds()}},y:{accessor:1,format:metric.toSerializedFieldFormat(),label:metric.makeLabel()}}}function onResults(resp){inspectorRequest.stats(Object(kibana_services["f"])(resp,$scope.searchSource)).ok({json:resp});if(getTimeField()){var tabifiedData=Object(kibana_services["u"])($scope.vis.data.aggs,resp);$scope.searchSource.rawResponse=resp;$scope.histogramData=response_handler_discoverResponseHandler(tabifiedData,getDimensions($scope.vis.data.aggs.aggs,$scope.timeRange));$scope.updateTime()}$scope.hits=resp.hits.total;$scope.rows=resp.hits.hits;var counts=$scope.fieldCounts=$scope.fieldCounts||{};$scope.rows.forEach((function(hit){var fields=Object.keys($scope.indexPattern.flattenHit(hit));fields.forEach((function(fieldName){counts[fieldName]=(counts[fieldName]||0)+1}))}));$scope.fetchStatus=fetchStatuses.COMPLETE}function logInspectorRequest(){inspectorAdapters.requests.reset();var title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.inspectorRequestDataTitle",{defaultMessage:"data"});var description=external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.inspectorRequestDescription",{defaultMessage:"This request queries Elasticsearch to fetch the data for the search."});inspectorRequest=inspectorAdapters.requests.start(title,{description:description});inspectorRequest.stats(Object(kibana_services["e"])($scope.searchSource));$scope.searchSource.getSearchRequestBody().then((function(body){inspectorRequest.json(body)}))}$scope.updateTime=function(){var _timefilter$getTime=timefilter.getTime(),from=_timefilter$getTime.from,to=_timefilter$getTime.to;$scope.timeRange={from:elastic_datemath_default.a.parse(from),to:elastic_datemath_default.a.parse(to,{roundUp:true})}};$scope.toMoment=function(datetime){if(!datetime){return}return external_kbnSharedDeps_Moment_default()(datetime).format(config.get("dateFormat"))};$scope.resetQuery=function(){history.push($route.current.params.id?"/view/".concat(encodeURIComponent($route.current.params.id)):"/");$route.reload()};$scope.onSkipBottomButtonClick=function(){$scope.minimumVisibleRows=$scope.hits;var bottomMarker=$element.find("#discoverBottomMarker");$timeout((function(){bottomMarker.focus();$timeout((function(){bottomMarker.blur()}),0)}),0)};$scope.newQuery=function(){history.push("/")};$scope.updateDataSource=function(){var indexPattern=$scope.indexPattern,searchSource=$scope.searchSource;searchSource.setField("index",$scope.indexPattern).setField("size",$scope.opts.sampleSize).setField("sort",Object(doc_table["c"])($scope.state.sort,indexPattern,config.get(common["j"]))).setField("query",data.query.queryString.getQuery()||null).setField("filter",discover_filterManager.getFilters());return Promise.resolve()};$scope.setSortOrder=function setSortOrder(sort){setAppState({sort:sort})};$scope.filterQuery=function(field,values,operation){var indexPattern=$scope.indexPattern;Object(popularize_field["a"])(indexPattern,field.name,discover_indexPatterns);var newFilters=data_public["f"].generateFilters(discover_filterManager,field,values,operation,$scope.indexPattern.id);return discover_filterManager.addFilters(newFilters)};$scope.addColumn=function addColumn(columnName){if(uiCapabilities.discover.save){var indexPattern=$scope.indexPattern;Object(popularize_field["a"])(indexPattern,columnName,discover_indexPatterns)}var columns=actions_columns["a"]($scope.state.columns,columnName);setAppState({columns:columns})};$scope.removeColumn=function removeColumn(columnName){if(uiCapabilities.discover.save){var indexPattern=$scope.indexPattern;Object(popularize_field["a"])(indexPattern,columnName,discover_indexPatterns)}var columns=actions_columns["c"]($scope.state.columns,columnName);var sort=$scope.state.sort.length?$scope.state.sort.filter((function(subArr){return subArr[0]!==columnName})):[];setAppState({columns:columns,sort:sort})};$scope.moveColumn=function moveColumn(columnName,newIndex){var columns=actions_columns["b"]($scope.state.columns,columnName,newIndex);setAppState({columns:columns})};$scope.scrollToTop=function(){$window.scrollTo(0,0)};function setupVisualization(){return _setupVisualization.apply(this,arguments)}function _setupVisualization(){_setupVisualization=discover_asyncToGenerator(regeneratorRuntime.mark((function _callee11(){var histogramInterval,visStateAggs;return regeneratorRuntime.wrap((function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:if(getTimeField()){_context11.next=2;break}return _context11.abrupt("return");case 2:histogramInterval=$scope.state.interval;visStateAggs=[{type:"count",schema:"metric"},{type:"date_histogram",schema:"segment",params:{field:getTimeField(),interval:histogramInterval,timeRange:timefilter.getTime()}}];_context11.next=6;return visualizations.createVis("histogram",{title:savedSearch.title,params:{addLegend:false,addTimeMarker:true},data:{aggs:visStateAggs,searchSource:$scope.searchSource.getSerializedFields()}});case 6:$scope.vis=_context11.sent;$scope.searchSource.onRequestStart((function(searchSource,options){if(!$scope.vis)return;return $scope.vis.data.aggs.onSearchRequestStart(searchSource,options)}));$scope.searchSource.setField("aggs",(function(){if(!$scope.vis)return;return $scope.vis.data.aggs.toDsl()}));case 9:case"end":return _context11.stop()}}}),_callee11)})));return _setupVisualization.apply(this,arguments)}function getIndexPatternWarning(index){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.valueIsNotConfiguredIndexPatternIDWarningTitle",{defaultMessage:"{stateVal} is not a configured index pattern ID",values:{stateVal:'"'.concat(index,'"')}})}function resolveIndexPatternLoading(){var _$route$current$local=$route.current.locals.savedObjects.ip,loadedIndexPattern=_$route$current$local.loaded,stateVal=_$route$current$local.stateVal,stateValFound=_$route$current$local.stateValFound;var ownIndexPattern=$scope.searchSource.getOwnField("index");if(ownIndexPattern&&!stateVal){return ownIndexPattern}if(stateVal&&!stateValFound){var warningTitle=getIndexPatternWarning();if(ownIndexPattern){discover_toastNotifications.addWarning({title:warningTitle,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.showingSavedIndexPatternWarningDescription",{defaultMessage:'Showing the saved index pattern: "{ownIndexPatternTitle}" ({ownIndexPatternId})',values:{ownIndexPatternTitle:ownIndexPattern.title,ownIndexPatternId:ownIndexPattern.id}})});return ownIndexPattern}discover_toastNotifications.addWarning({title:warningTitle,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.showingDefaultIndexPatternWarningDescription",{defaultMessage:'Showing the default index pattern: "{loadedIndexPatternTitle}" ({loadedIndexPatternId})',values:{loadedIndexPatternTitle:loadedIndexPattern.title,loadedIndexPatternId:loadedIndexPattern.id}})})}return loadedIndexPattern}addHelpMenuToAppChrome(discover_chrome);init();replaceUrlAppState().then((function(){return startStateSync()}))}var doc='<div class="app-container">\n    <discover-doc\n      id="id"\n      index="index"\n      index-pattern-id="indexPatternId"\n      index-pattern-service="indexPatternService"\n    ></discover-doc>\n</div>\n';function use_es_doc_search_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function use_es_doc_search_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){use_es_doc_search_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){use_es_doc_search_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function use_es_doc_search_slicedToArray(arr,i){return use_es_doc_search_arrayWithHoles(arr)||use_es_doc_search_iterableToArrayLimit(arr,i)||use_es_doc_search_unsupportedIterableToArray(arr,i)||use_es_doc_search_nonIterableRest()}function use_es_doc_search_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_es_doc_search_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_es_doc_search_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_es_doc_search_arrayLikeToArray(o,minLen)}function use_es_doc_search_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function use_es_doc_search_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_es_doc_search_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var ElasticRequestState;(function(ElasticRequestState){ElasticRequestState[ElasticRequestState["Loading"]=0]="Loading";ElasticRequestState[ElasticRequestState["NotFound"]=1]="NotFound";ElasticRequestState[ElasticRequestState["Found"]=2]="Found";ElasticRequestState[ElasticRequestState["Error"]=3]="Error";ElasticRequestState[ElasticRequestState["NotFoundIndexPattern"]=4]="NotFoundIndexPattern"})(ElasticRequestState||(ElasticRequestState={}));function buildSearchBody(id,indexPattern){var computedFields=indexPattern.getComputedFields();return{query:{ids:{values:[id]}},stored_fields:computedFields.storedFields,_source:true,script_fields:computedFields.scriptFields,docvalue_fields:computedFields.docvalueFields}}function useEsDocSearch(_ref){var id=_ref.id,index=_ref.index,indexPatternId=_ref.indexPatternId,indexPatternService=_ref.indexPatternService;var _useState=Object(external_kbnSharedDeps_React_["useState"])(null),_useState2=use_es_doc_search_slicedToArray(_useState,2),indexPattern=_useState2[0],setIndexPattern=_useState2[1];var _useState3=Object(external_kbnSharedDeps_React_["useState"])(ElasticRequestState.Loading),_useState4=use_es_doc_search_slicedToArray(_useState3,2),status=_useState4[0],setStatus=_useState4[1];var _useState5=Object(external_kbnSharedDeps_React_["useState"])(null),_useState6=use_es_doc_search_slicedToArray(_useState5,2),hit=_useState6[0],setHit=_useState6[1];Object(external_kbnSharedDeps_React_["useEffect"])((function(){function requestData(){return _requestData.apply(this,arguments)}function _requestData(){_requestData=use_es_doc_search_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _hits$hits,indexPatternEntity,_yield$getServices$da,rawResponse,hits;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return indexPatternService.get(indexPatternId);case 3:indexPatternEntity=_context.sent;setIndexPattern(indexPatternEntity);_context.next=7;return Object(kibana_services["h"])().data.search.search({params:{index:index,body:buildSearchBody(id,indexPatternEntity)}}).toPromise();case 7:_yield$getServices$da=_context.sent;rawResponse=_yield$getServices$da.rawResponse;hits=rawResponse.hits;if(hits===null||hits===void 0?void 0:(_hits$hits=hits.hits)===null||_hits$hits===void 0?void 0:_hits$hits[0]){setStatus(ElasticRequestState.Found);setHit(hits.hits[0])}else{setStatus(ElasticRequestState.NotFound)}_context.next=16;break;case 13:_context.prev=13;_context.t0=_context["catch"](0);if(_context.t0.savedObjectId){setStatus(ElasticRequestState.NotFoundIndexPattern)}else if(_context.t0.status===404){setStatus(ElasticRequestState.NotFound)}else{setStatus(ElasticRequestState.Error)}case 16:case"end":return _context.stop()}}}),_callee,null,[[0,13]])})));return _requestData.apply(this,arguments)}requestData()}),[id,index,indexPatternId,indexPatternService]);return[status,hit,indexPattern]}var doc_viewer=__webpack_require__(733);function doc_slicedToArray(arr,i){return doc_arrayWithHoles(arr)||doc_iterableToArrayLimit(arr,i)||doc_unsupportedIterableToArray(arr,i)||doc_nonIterableRest()}function doc_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function doc_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return doc_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return doc_arrayLikeToArray(o,minLen)}function doc_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function doc_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function doc_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function Doc(props){var _useEsDocSearch=useEsDocSearch(props),_useEsDocSearch2=doc_slicedToArray(_useEsDocSearch,3),reqState=_useEsDocSearch2[0],hit=_useEsDocSearch2[1],indexPattern=_useEsDocSearch2[2];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,reqState===ElasticRequestState.NotFoundIndexPattern&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"danger","data-test-subj":"doc-msg-notFoundIndexPattern",iconType:"alert",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.doc.failedToLocateIndexPattern",defaultMessage:"No index pattern matches ID {indexPatternId}",values:{indexPatternId:props.indexPatternId}})}),reqState===ElasticRequestState.NotFound&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"danger","data-test-subj":"doc-msg-notFound",iconType:"alert",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.doc.failedToLocateDocumentDescription",defaultMessage:"Cannot find document"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.doc.couldNotFindDocumentsDescription",defaultMessage:"No documents match that ID."})),reqState===ElasticRequestState.Error&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"danger","data-test-subj":"doc-msg-error",iconType:"alert",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.doc.failedToExecuteQueryDescription",defaultMessage:"Cannot run search"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.doc.somethingWentWrongDescription",defaultMessage:"{indexName} is missing.",values:{indexName:props.index}})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:"https://www.elastic.co/guide/en/elasticsearch/reference/".concat(Object(kibana_services["h"])().metadata.branch,"/indices-exists.html"),target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.doc.somethingWentWrongDescriptionAddon",defaultMessage:"Please ensure the index exists."}))),reqState===ElasticRequestState.Loading&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"doc-msg-loading"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"m"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.doc.loadingDescription",defaultMessage:"Loading…"})),reqState===ElasticRequestState.Found&&hit!==null&&indexPattern&&external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"doc-hit"},external_kbnSharedDeps_React_default.a.createElement(doc_viewer["a"],{hit:hit,indexPattern:indexPattern}))))}function doc_toConsumableArray(arr){return doc_arrayWithoutHoles(arr)||doc_iterableToArray(arr)||angular_doc_unsupportedIterableToArray(arr)||doc_nonIterableSpread()}function doc_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function angular_doc_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return angular_doc_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return angular_doc_arrayLikeToArray(o,minLen)}function doc_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function doc_arrayWithoutHoles(arr){if(Array.isArray(arr))return angular_doc_arrayLikeToArray(arr)}function angular_doc_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var doc_getServices=Object(kibana_services["h"])(),doc_timefilter=doc_getServices.timefilter;var doc_app=Object(kibana_services["a"])();doc_app.directive("discoverDoc",(function(reactDirective){return reactDirective(Doc,[["id",{watchDepth:"value"}],["index",{watchDepth:"value"}],["indexPatternId",{watchDepth:"reference"}],["indexPatternService",{watchDepth:"reference"}]],{restrict:"E"})}));doc_app.config((function($routeProvider){$routeProvider.when("/doc/:indexPattern/:index/:type",{redirectTo:"/doc/:indexPattern/:index"}).when("/doc/:indexPattern/:index",{controller:function controller($scope,$route){doc_timefilter.disableAutoRefreshSelector();doc_timefilter.disableTimeRangeSelector();$scope.id=$route.current.params.id;$scope.index=$route.current.params.index;$scope.indexPatternId=$route.current.params.indexPattern;$scope.indexPatternService=Object(kibana_services["h"])().indexPatterns},template:doc,k7Breadcrumbs:function k7Breadcrumbs($route){return[].concat(doc_toConsumableArray(getRootBreadcrumbs()),[{text:"".concat($route.current.params.index,"#").concat($route.current.params.id)}])}})}));var context_app='<kbn-top-nav\n  app-name="\'context\'"\n  show-search-bar="true"\n  show-filter-bar="true"\n  show-query-bar="false"\n  show-save-query="false"\n  show-date-picker="false"\n  index-patterns="[contextApp.indexPattern]"\n  use-default-behaviors="true"\n>\n</kbn-top-nav>\n\n\n\x3c!-- Error feedback --\x3e\n<context-error-message \n  status="contextApp.state.loadingStatus.anchor.status" \n  reason="contextApp.state.loadingStatus.anchor.reason">\n</context-error-message>\n\n<main\n  class="kuiViewContent kuiViewContentItem"\n  ng-if="contextApp.state.loadingStatus.anchor.status !== contextApp.constants.LOADING_STATUS.FAILED"\n>\n  \x3c!-- Controls --\x3e\n  <context-action-bar\n        default-step-size="contextApp.state.queryParameters.defaultStepSize"\n        doc-count="contextApp.state.queryParameters.predecessorCount"\n        doc-count-available="contextApp.state.rows.predecessors.length"\n        is-disabled="contextApp.state.loadingStatus.anchor.status !== contextApp.constants.LOADING_STATUS.LOADED"\n        is-loading="![\n        contextApp.constants.LOADING_STATUS.LOADED,\n        contextApp.constants.LOADING_STATUS.FAILED,\n        ].includes(contextApp.state.loadingStatus.predecessors.status)"\n        on-change-count="contextApp.actions.fetchGivenPredecessorRows"\n        type="\'predecessors\'"\n  ></context-action-bar>\n\n\n  \x3c!-- Loading feedback --\x3e\n  <div\n    ng-if="[\n      contextApp.constants.LOADING_STATUS.UNINITIALIZED,\n      contextApp.constants.LOADING_STATUS.LOADING,\n    ].includes(contextApp.state.loadingStatus.anchor.status)"\n    class="kuiPanel kuiPanel--centered kuiVerticalRhythm"\n  >\n    <div\n      class="kuiTableInfo"\n      i18n-id="discover.context.loadingDescription"\n      i18n-default-message="Loading…"\n    ></div>\n  </div>\n\n  \x3c!-- Table --\x3e\n  <div\n    ng-if="contextApp.state.loadingStatus.anchor.status === contextApp.constants.LOADING_STATUS.LOADED"\n    class="kuiPanel kuiVerticalRhythm"\n  >\n    <div class="discover-table" fixed-scroll>\n      <doc-table\n        filter="contextApp.actions.addFilter"\n        hits="contextApp.state.rows.all"\n        index-pattern="contextApp.indexPattern"\n        sorting="contextApp.state.queryParameters.sort"\n        columns="contextApp.state.queryParameters.columns"\n        infinite-scroll="true"\n        minimum-visible-rows="contextApp.state.rows.all.length"\n      ></doc-table>\n    </div>\n  </div>\n\n  \x3c!-- Controls --\x3e\n  <context-action-bar\n    default-step-size="contextApp.state.queryParameters.defaultStepSize"\n    doc-count="contextApp.state.queryParameters.successorCount"\n    doc-count-available="contextApp.state.rows.successors.length"\n    is-disabled="contextApp.state.loadingStatus.anchor.status !== contextApp.constants.LOADING_STATUS.LOADED"\n    is-loading="![\n    contextApp.constants.LOADING_STATUS.LOADED,\n    contextApp.constants.LOADING_STATUS.FAILED,\n    ].includes(contextApp.state.loadingStatus.successors.status)"\n    on-change-count="contextApp.actions.fetchGivenSuccessorRows"\n    type="\'successors\'"\n  ></context-action-bar>\n</main>\n';function ActionBarWarning(_ref){var docCount=_ref.docCount,type=_ref.type;if(type==="predecessors"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"warning","data-test-subj":"predecessorsWarningMsg",iconType:"bolt",title:docCount===0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.context.newerDocumentsWarningZero",defaultMessage:"No documents newer than the anchor could be found."}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.context.newerDocumentsWarning",defaultMessage:"Only {docCount} documents newer than the anchor could be found.",values:{docCount:docCount}}),size:"s"})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"warning","data-test-subj":"successorsWarningMsg",iconType:"bolt",title:docCount===0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.context.olderDocumentsWarningZero",defaultMessage:"No documents older than the anchor could be found."}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.context.olderDocumentsWarning",defaultMessage:"Only {docCount} documents older than the anchor could be found.",values:{docCount:docCount}}),size:"s"})}var constants=__webpack_require__(213);function action_bar_slicedToArray(arr,i){return action_bar_arrayWithHoles(arr)||action_bar_iterableToArrayLimit(arr,i)||action_bar_unsupportedIterableToArray(arr,i)||action_bar_nonIterableRest()}function action_bar_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function action_bar_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return action_bar_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return action_bar_arrayLikeToArray(o,minLen)}function action_bar_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function action_bar_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function action_bar_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ActionBar(_ref){var defaultStepSize=_ref.defaultStepSize,docCount=_ref.docCount,docCountAvailable=_ref.docCountAvailable,isDisabled=_ref.isDisabled,isLoading=_ref.isLoading,onChangeCount=_ref.onChangeCount,type=_ref.type;var showWarning=!isDisabled&&!isLoading&&docCountAvailable<docCount;var isSuccessor=type==="successors";var _useState=Object(external_kbnSharedDeps_React_["useState"])(docCount),_useState2=action_bar_slicedToArray(_useState,2),newDocCount=_useState2[0],setNewDocCount=_useState2[1];var isValid=function isValid(value){return value>=constants["b"]&&value<=constants["a"]};var onSubmit=function onSubmit(ev){ev.preventDefault();if(newDocCount!==docCount&&isValid(newDocCount)){onChangeCount(newDocCount)}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement("form",{onSubmit:onSubmit},isSuccessor&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),isSuccessor&&showWarning&&external_kbnSharedDeps_React_default.a.createElement(ActionBarWarning,{docCount:docCountAvailable,type:type}),isSuccessor&&showWarning&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"row",gutterSize:"s",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"".concat(type,"LoadMoreButton"),iconType:isSuccessor?"arrowDown":"arrowUp",isDisabled:isDisabled,isLoading:isLoading,onClick:function onClick(){var value=newDocCount+defaultStepSize;if(isValid(value)){setNewDocCount(value);onChangeCount(value)}},flush:"right"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.context.loadButtonLabel",defaultMessage:"Load"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{"aria-label":isSuccessor?external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.context.olderDocumentsAriaLabel",{defaultMessage:"Number of older documents"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.context.newerDocumentsAriaLabel",{defaultMessage:"Number of newer documents"}),className:"cxtSizePicker","data-test-subj":"".concat(type,"CountPicker"),disabled:isDisabled,min:constants["b"],max:constants["a"],onChange:function onChange(ev){setNewDocCount(ev.target.valueAsNumber)},onBlur:function onBlur(){if(newDocCount!==docCount&&isValid(newDocCount)){onChangeCount(newDocCount)}},type:"number",value:newDocCount>=0?newDocCount:""}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{displayOnly:true},isSuccessor?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.context.olderDocumentsDescription",defaultMessage:"older documents"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.context.newerDocumentsDescription",defaultMessage:"newer documents"})))),!isSuccessor&&showWarning&&external_kbnSharedDeps_React_default.a.createElement(ActionBarWarning,{docCount:docCountAvailable,type:type}),!isSuccessor&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"})))}Object(kibana_services["a"])().directive("contextActionBar",(function(reactDirective){return reactDirective(ActionBar)}));var sorting=__webpack_require__(688);var query_parameters=__webpack_require__(747);var context_query=__webpack_require__(721);function callAfterBindingsWorkaround(constructor){return function InitAfterBindingsWrapper($injector,$attrs,$element,$scope,$transclude){var _this=this;this.$onInit=function(){$injector.invoke(constructor,_this,{$attrs:$attrs,$element:$element,$scope:$scope,$transclude:$transclude})}}}function context_app_toConsumableArray(arr){return context_app_arrayWithoutHoles(arr)||context_app_iterableToArray(arr)||context_app_unsupportedIterableToArray(arr)||context_app_nonIterableSpread()}function context_app_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function context_app_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return context_app_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return context_app_arrayLikeToArray(o,minLen)}function context_app_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function context_app_arrayWithoutHoles(arr){if(Array.isArray(arr))return context_app_arrayLikeToArray(arr)}function context_app_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function context_app_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function context_app_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){context_app_ownKeys(Object(source),true).forEach((function(key){context_app_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{context_app_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function context_app_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object(kibana_services["a"])().directive("contextApp",(function ContextApp(){return{bindToController:true,controller:callAfterBindingsWorkaround(ContextAppController),controllerAs:"contextApp",restrict:"E",scope:{anchorId:"=",columns:"=",indexPattern:"=",filters:"=",predecessorCount:"=",successorCount:"=",sort:"="},template:context_app}}));function ContextAppController($scope,Private){var _this=this;var _getServices=Object(kibana_services["h"])(),filterManager=_getServices.filterManager,indexPatterns=_getServices.indexPatterns,uiSettings=_getServices.uiSettings;var queryParameterActions=Object(query_parameters["c"])(filterManager,indexPatterns);var queryActions=Private(context_query["c"]);this.state=createInitialState(parseInt(uiSettings.get(common["b"]),10),Object(sorting["a"])(this.indexPattern,uiSettings.get(common["c"])));this.actions=external_kbnSharedDeps_Lodash_default.a.mapValues(context_app_objectSpread(context_app_objectSpread({},queryParameterActions),queryActions),(function(action){return function(){return action(_this.state).apply(void 0,arguments)}}));this.constants={FAILURE_REASONS:context_query["a"],LOADING_STATUS:context_query["b"]};$scope.$watchGroup([function(){return _this.state.rows.predecessors},function(){return _this.state.rows.anchor},function(){return _this.state.rows.successors}],(function(newValues){var _this$actions;return(_this$actions=_this.actions).setAllRows.apply(_this$actions,context_app_toConsumableArray(newValues))}));$scope.$watchCollection((function(){return context_app_objectSpread(context_app_objectSpread({},external_kbnSharedDeps_Lodash_default.a.pick(_this,query_parameters["a"])),{},{indexPatternId:_this.indexPattern.id})}),(function(newQueryParameters){var queryParameters=_this.state.queryParameters;if(newQueryParameters.indexPatternId!==queryParameters.indexPatternId||newQueryParameters.anchorId!==queryParameters.anchorId||!external_kbnSharedDeps_Lodash_default.a.isEqual(newQueryParameters.sort,queryParameters.sort)){_this.actions.fetchAllRowsWithNewQueryParameters(external_kbnSharedDeps_Lodash_default.a.cloneDeep(newQueryParameters))}else if(newQueryParameters.predecessorCount!==queryParameters.predecessorCount||newQueryParameters.successorCount!==queryParameters.successorCount||!external_kbnSharedDeps_Lodash_default.a.isEqual(newQueryParameters.filters,queryParameters.filters)){_this.actions.fetchContextRowsWithNewQueryParameters(external_kbnSharedDeps_Lodash_default.a.cloneDeep(newQueryParameters))}}));$scope.$watchCollection((function(){return{predecessorCount:_this.state.queryParameters.predecessorCount,successorCount:_this.state.queryParameters.successorCount}}),(function(newParameters){external_kbnSharedDeps_Lodash_default.a.assign(_this,newParameters)}))}function createInitialState(defaultStepSize,tieBreakerField){return{queryParameters:Object(query_parameters["b"])(defaultStepSize,tieBreakerField),rows:{all:[],anchor:null,predecessors:[],successors:[]},loadingStatus:Object(context_query["d"])()}}function context_state_objectWithoutProperties(source,excluded){if(source==null)return{};var target=context_state_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function context_state_objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function context_state_toConsumableArray(arr){return context_state_arrayWithoutHoles(arr)||context_state_iterableToArray(arr)||context_state_unsupportedIterableToArray(arr)||context_state_nonIterableSpread()}function context_state_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function context_state_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return context_state_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return context_state_arrayLikeToArray(o,minLen)}function context_state_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function context_state_arrayWithoutHoles(arr){if(Array.isArray(arr))return context_state_arrayLikeToArray(arr)}function context_state_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function context_state_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function context_state_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){context_state_ownKeys(Object(source),true).forEach((function(key){context_state_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{context_state_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function context_state_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var GLOBAL_STATE_URL_KEY="_g";var context_state_APP_STATE_URL_KEY="_a";function context_state_getState(_ref){var defaultStepSize=_ref.defaultStepSize,timeFieldName=_ref.timeFieldName,_ref$storeInSessionSt=_ref.storeInSessionStorage,storeInSessionStorage=_ref$storeInSessionSt===void 0?false:_ref$storeInSessionSt,history=_ref.history,toasts=_ref.toasts;var stateStorage=Object(kibana_utils_public["g"])(context_state_objectSpread({useHash:storeInSessionStorage,history:history},toasts&&Object(kibana_utils_public["t"])(toasts)));var globalStateInitial=stateStorage.get(GLOBAL_STATE_URL_KEY);var globalStateContainer=Object(kibana_utils_public["j"])(globalStateInitial);var appStateFromUrl=stateStorage.get(context_state_APP_STATE_URL_KEY);var appStateInitial=createInitialAppState(defaultStepSize,timeFieldName,appStateFromUrl);var appStateContainer=Object(kibana_utils_public["j"])(appStateInitial);var _syncStates=Object(kibana_utils_public["q"])([{storageKey:GLOBAL_STATE_URL_KEY,stateContainer:context_state_objectSpread(context_state_objectSpread({},globalStateContainer),{set:function set(value){if(value){globalStateContainer.set(value)}}}),stateStorage:stateStorage},{storageKey:context_state_APP_STATE_URL_KEY,stateContainer:context_state_objectSpread(context_state_objectSpread({},appStateContainer),{set:function set(value){if(value){appStateContainer.set(value)}}}),stateStorage:stateStorage}]),start=_syncStates.start,stop=_syncStates.stop;return{globalState:globalStateContainer,appState:appStateContainer,startSync:start,stopSync:stop,setAppState:function setAppState(newState){var oldState=appStateContainer.getState();var mergedState=context_state_objectSpread(context_state_objectSpread({},oldState),newState);if(!context_state_isEqualState(oldState,mergedState)){appStateContainer.set(mergedState)}},getFilters:function getFilters(){return[].concat(context_state_toConsumableArray(_getFilters(globalStateContainer.getState())),context_state_toConsumableArray(_getFilters(appStateContainer.getState())))},setFilters:function setFilters(filterManager){var globalFilters=filterManager.getGlobalFilters();var globalFilterChanged=!context_state_isEqualFilters(globalFilters,_getFilters(globalStateContainer.getState()));if(globalFilterChanged){globalStateContainer.set({filters:globalFilters})}var appFilters=filterManager.getAppFilters();var appFilterChanged=!context_state_isEqualFilters(appFilters,_getFilters(appStateContainer.getState()));if(appFilterChanged){appStateContainer.set(context_state_objectSpread(context_state_objectSpread({},appStateContainer.getState()),{filters:appFilters}))}},flushToUrl:function flushToUrl(replace){return stateStorage.flush({replace:replace})}}}function context_state_isEqualFilters(filtersA,filtersB){if(!filtersA&&!filtersB){return true}else if(!filtersA||!filtersB){return false}return data_public["f"].compareFilters(filtersA,filtersB,data_public["f"].COMPARE_ALL_OPTIONS)}function context_state_isEqualState(stateA,stateB){if(!stateA&&!stateB){return true}else if(!stateA||!stateB){return false}var _stateA$filters=stateA.filters,stateAFilters=_stateA$filters===void 0?[]:_stateA$filters,stateAPartial=context_state_objectWithoutProperties(stateA,["filters"]);var _stateB$filters=stateB.filters,stateBFilters=_stateB$filters===void 0?[]:_stateB$filters,stateBPartial=context_state_objectWithoutProperties(stateB,["filters"]);return external_kbnSharedDeps_Lodash_default.a.isEqual(stateAPartial,stateBPartial)&&data_public["f"].compareFilters(stateAFilters,stateBFilters,data_public["f"].COMPARE_ALL_OPTIONS)}function _getFilters(state){if(!state||!Array.isArray(state.filters)){return[]}return state.filters}function createInitialAppState(defaultSize,timeFieldName,urlState){var defaultState={columns:["_source"],filters:[],predecessorCount:parseInt(defaultSize,10),sort:[timeFieldName,"desc"],successorCount:parseInt(defaultSize,10)};if(typeof urlState!=="object"){return defaultState}return context_state_objectSpread(context_state_objectSpread({},defaultState),urlState)}var context='<context-app\n  anchor-id="contextAppRoute.anchorId"\n  columns="contextAppRoute.state.columns"\n  index-pattern="contextAppRoute.indexPattern"\n  filters="contextAppRoute.filters"\n  predecessor-count="contextAppRoute.state.predecessorCount"\n  successor-count="contextAppRoute.state.successorCount"\n  sort="contextAppRoute.state.sort"\n></context-app>\n';function context_slicedToArray(arr,i){return context_arrayWithHoles(arr)||context_iterableToArrayLimit(arr,i)||context_unsupportedIterableToArray(arr,i)||context_nonIterableRest()}function context_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function context_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function context_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function context_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function context_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){context_ownKeys(Object(source),true).forEach((function(key){context_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{context_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function context_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function context_toConsumableArray(arr){return context_arrayWithoutHoles(arr)||context_iterableToArray(arr)||context_unsupportedIterableToArray(arr)||context_nonIterableSpread()}function context_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function context_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return context_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return context_arrayLikeToArray(o,minLen)}function context_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function context_arrayWithoutHoles(arr){if(Array.isArray(arr))return context_arrayLikeToArray(arr)}function context_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var context_k7Breadcrumbs=function k7Breadcrumbs($route){var indexPattern=$route.current.locals.indexPattern;var id=$route.current.params.id;return[].concat(context_toConsumableArray(getRootBreadcrumbs()),[{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.context.breadcrumb",{defaultMessage:"Context of {indexPatternTitle}#{docId}",values:{indexPatternTitle:indexPattern.title,docId:id}})}])};Object(kibana_services["a"])().config((function($routeProvider){$routeProvider.when("/context/:indexPatternId/:id*",{controller:ContextAppRouteController,k7Breadcrumbs:context_k7Breadcrumbs,controllerAs:"contextAppRoute",resolve:{indexPattern:function indexPattern($route,Promise){var indexPattern=Object(kibana_services["h"])().indexPatterns.get($route.current.params.indexPatternId);return Promise.props({ip:indexPattern})}},template:context})}));function ContextAppRouteController($routeParams,$scope,$route){var filterManager=Object(kibana_services["h"])().filterManager;var indexPattern=$route.current.locals.indexPattern.ip;var _getState=context_state_getState({defaultStepSize:Object(kibana_services["h"])().uiSettings.get(common["a"]),timeFieldName:indexPattern.timeFieldName,storeInSessionStorage:Object(kibana_services["h"])().uiSettings.get("state:storeInSessionStorage"),history:Object(kibana_services["h"])().history(),toasts:Object(kibana_services["h"])().core.notifications.toasts}),startStateSync=_getState.startSync,stopStateSync=_getState.stopSync,appState=_getState.appState,getFilters=_getState.getFilters,setFilters=_getState.setFilters,setAppState=_getState.setAppState,flushToUrl=_getState.flushToUrl;this.state=context_objectSpread({},appState.getState());this.anchorId=$routeParams.id;this.indexPattern=indexPattern;filterManager.setFilters(external_kbnSharedDeps_Lodash_default.a.cloneDeep(getFilters()));startStateSync();$scope.$watchGroup(["contextAppRoute.state.columns","contextAppRoute.state.predecessorCount","contextAppRoute.state.successorCount"],(function(newValues){var _newValues=context_slicedToArray(newValues,3),columns=_newValues[0],predecessorCount=_newValues[1],successorCount=_newValues[2];if(Array.isArray(columns)&&predecessorCount>=0&&successorCount>=0){setAppState({columns:columns,predecessorCount:predecessorCount,successorCount:successorCount});flushToUrl(true)}}));var filterObservable=filterManager.getUpdates$().subscribe((function(){setFilters(filterManager);$route.reload()}));$scope.$on("$destroy",(function(){stopStateSync();filterObservable.unsubscribe()}))}var angular_doc_viewer=__webpack_require__(454);Object(kibana_services["a"])().config((function($routeProvider){$routeProvider.otherwise({resolveRedirectTo:function resolveRedirectTo($rootScope){var path=window.location.hash.substr(1);Object(kibana_services["j"])().restorePreviousUrl();$rootScope.$applyAsync((function(){var _getServices=Object(kibana_services["h"])(),urlForwarding=_getServices.urlForwarding;var _urlForwarding$naviga=urlForwarding.navigateToLegacyKibanaUrl(path),navigated=_urlForwarding$naviga.navigated;if(!navigated){urlForwarding.navigateToDefaultApp()}}));return new Promise((function(){}))}})}));var no_results=__webpack_require__(690);var uninitialized=__webpack_require__(691);var histogram=__webpack_require__(692);var directives_app=Object(kibana_services["a"])();directives_app.directive("discoverNoResults",(function(reactDirective){return reactDirective(no_results["a"])}));directives_app.directive("discoverUninitialized",(function(reactDirective){return reactDirective(uninitialized["a"])}));directives_app.directive("discoverHistogram",(function(reactDirective){return reactDirective(histogram["a"])}))},463:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return addColumn}));__webpack_require__.d(__webpack_exports__,"c",(function(){return removeColumn}));__webpack_require__.d(__webpack_exports__,"b",(function(){return moveColumn}));function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function buildColumns(columns){if(columns.length>1&&columns.indexOf("_source")!==-1){return columns.filter((function(col){return col!=="_source"}))}else if(columns.length!==0){return columns}return["_source"]}function addColumn(columns,columnName){if(columns.includes(columnName)){return columns}return buildColumns([].concat(_toConsumableArray(columns),[columnName]))}function removeColumn(columns,columnName){if(!columns.includes(columnName)){return columns}return buildColumns(columns.filter((function(col){return col!==columnName})))}function moveColumn(columns,columnName,newIndex){if(newIndex<0||newIndex>=columns.length||!columns.includes(columnName)){return columns}var modifiedColumns=_toConsumableArray(columns);modifiedColumns.splice(modifiedColumns.indexOf(columnName),1);modifiedColumns.splice(newIndex,0,columnName);return modifiedColumns}}}]);