(window["wazuh_bundle_jsonpfunction"]=window["wazuh_bundle_jsonpfunction"]||[]).push([[18],{1918:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(1919);case"v7light":return __webpack_require__(1921);case"v8dark":return __webpack_require__(1923);case"v8light":return __webpack_require__(1925)}},1919:function(module,exports,__webpack_require__){var api=__webpack_require__(116);var content=__webpack_require__(1920);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},1920:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(117);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/**\n   * 1. We want the kbnDocTable__container to scroll only when embedded in an embeddable panel\n   * 2. Force a better looking scrollbar\n   */\n.embPanel .kbnDocTable__container {\n  scrollbar-width: thin;\n  /* 2 */\n  flex: 1 1 0;\n  /* 1 */\n  overflow: auto;\n  /* 1 */ }\n  .embPanel .kbnDocTable__container::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .embPanel .kbnDocTable__container::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .embPanel .kbnDocTable__container::-webkit-scrollbar-corner, .embPanel .kbnDocTable__container::-webkit-scrollbar-track {\n    background-color: transparent; }\n",""]);module.exports=exports},1921:function(module,exports,__webpack_require__){var api=__webpack_require__(116);var content=__webpack_require__(1922);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},1922:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(117);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/**\n   * 1. We want the kbnDocTable__container to scroll only when embedded in an embeddable panel\n   * 2. Force a better looking scrollbar\n   */\n.embPanel .kbnDocTable__container {\n  scrollbar-width: thin;\n  /* 2 */\n  flex: 1 1 0;\n  /* 1 */\n  overflow: auto;\n  /* 1 */ }\n  .embPanel .kbnDocTable__container::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .embPanel .kbnDocTable__container::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .embPanel .kbnDocTable__container::-webkit-scrollbar-corner, .embPanel .kbnDocTable__container::-webkit-scrollbar-track {\n    background-color: transparent; }\n",""]);module.exports=exports},1923:function(module,exports,__webpack_require__){var api=__webpack_require__(116);var content=__webpack_require__(1924);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},1924:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(117);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/**\n   * 1. We want the kbnDocTable__container to scroll only when embedded in an embeddable panel\n   * 2. Force a better looking scrollbar\n   */\n.embPanel .kbnDocTable__container {\n  scrollbar-width: thin;\n  /* 2 */\n  flex: 1 1 0;\n  /* 1 */\n  overflow: auto;\n  /* 1 */ }\n  .embPanel .kbnDocTable__container::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .embPanel .kbnDocTable__container::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .embPanel .kbnDocTable__container::-webkit-scrollbar-corner, .embPanel .kbnDocTable__container::-webkit-scrollbar-track {\n    background-color: transparent; }\n",""]);module.exports=exports},1925:function(module,exports,__webpack_require__){var api=__webpack_require__(116);var content=__webpack_require__(1926);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},1926:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(117);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/**\n   * 1. We want the kbnDocTable__container to scroll only when embedded in an embeddable panel\n   * 2. Force a better looking scrollbar\n   */\n.embPanel .kbnDocTable__container {\n  scrollbar-width: thin;\n  /* 2 */\n  flex: 1 1 0;\n  /* 1 */\n  overflow: auto;\n  /* 1 */ }\n  .embPanel .kbnDocTable__container::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .embPanel .kbnDocTable__container::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .embPanel .kbnDocTable__container::-webkit-scrollbar-corner, .embPanel .kbnDocTable__container::-webkit-scrollbar-track {\n    background-color: transparent; }\n",""]);module.exports=exports},1931:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"SearchEmbeddable",(function(){return search_embeddable_SearchEmbeddable}));var search_embeddable=__webpack_require__(1918);var external_kbnSharedDeps_Angular_=__webpack_require__(103);var external_kbnSharedDeps_Angular_default=__webpack_require__.n(external_kbnSharedDeps_Angular_);var external_kbnSharedDeps_Lodash_=__webpack_require__(17);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);var external_kbnSharedDeps_Rxjs_=__webpack_require__(14);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(99);var ui_actions_public=__webpack_require__(172);var inspector_public=__webpack_require__(206);var data_public=__webpack_require__(122);var embeddable_public=__webpack_require__(219);var actions_columns=__webpack_require__(463);var search_template='<doc-table\n  sorting="sort"\n  columns="columns"\n  data-shared-item\n  data-title="{{sharedItemTitle}}"\n  data-description="{{description}}"\n  render-complete\n  class="panel-content"\n  filter="filter"\n  on-add-column="addColumn"\n  on-change-sort-order="setSortOrder"\n  on-move-column="moveColumn"\n  on-remove-column="removeColumn"\n  data-test-subj="embeddedSavedSearchDocTable"\n  hits="hits"\n  index-pattern="indexPattern"\n  total-hit-count="totalHitCount"\n  is-loading="isLoading"\n>\n</doc-table>\n';var doc_table=__webpack_require__(323);var kibana_services=__webpack_require__(127);var constants=__webpack_require__(293);var common=__webpack_require__(182);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var search_embeddable_SearchEmbeddable=function(_Embeddable){_inherits(SearchEmbeddable,_Embeddable);var _super=_createSuper(SearchEmbeddable);function SearchEmbeddable(_ref,initialInput,executeTriggerActions,parent){var _this;var $rootScope=_ref.$rootScope,$compile=_ref.$compile,savedSearch=_ref.savedSearch,editUrl=_ref.editUrl,editPath=_ref.editPath,indexPatterns=_ref.indexPatterns,editable=_ref.editable,filterManager=_ref.filterManager;_classCallCheck(this,SearchEmbeddable);_this=_super.call(this,initialInput,{defaultTitle:savedSearch.title,editUrl:editUrl,editPath:editPath,editApp:"discover",indexPatterns:indexPatterns,editable:editable},parent);_this.executeTriggerActions=executeTriggerActions;_defineProperty(_assertThisInitialized(_this),"savedSearch",void 0);_defineProperty(_assertThisInitialized(_this),"$rootScope",void 0);_defineProperty(_assertThisInitialized(_this),"$compile",void 0);_defineProperty(_assertThisInitialized(_this),"inspectorAdaptors",void 0);_defineProperty(_assertThisInitialized(_this),"searchScope",void 0);_defineProperty(_assertThisInitialized(_this),"panelTitle","");_defineProperty(_assertThisInitialized(_this),"filtersSearchSource",void 0);_defineProperty(_assertThisInitialized(_this),"searchInstance",void 0);_defineProperty(_assertThisInitialized(_this),"autoRefreshFetchSubscription",void 0);_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_defineProperty(_assertThisInitialized(_this),"type",constants["a"]);_defineProperty(_assertThisInitialized(_this),"filterManager",void 0);_defineProperty(_assertThisInitialized(_this),"abortController",void 0);_defineProperty(_assertThisInitialized(_this),"prevTimeRange",void 0);_defineProperty(_assertThisInitialized(_this),"prevFilters",void 0);_defineProperty(_assertThisInitialized(_this),"prevQuery",void 0);_defineProperty(_assertThisInitialized(_this),"fetch",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var searchSource,title,description,inspectorRequest,resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_this.searchScope){_context.next=2;break}return _context.abrupt("return");case 2:searchSource=_this.savedSearch.searchSource;if(_this.abortController)_this.abortController.abort();_this.abortController=new AbortController;searchSource.setField("size",Object(kibana_services["h"])().uiSettings.get(common["h"]));searchSource.setField("sort",Object(doc_table["c"])(_this.searchScope.sort,_this.searchScope.indexPattern,Object(kibana_services["h"])().uiSettings.get(common["j"])));_this.inspectorAdaptors.requests.reset();title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.embeddable.inspectorRequestDataTitle",{defaultMessage:"Data"});description=external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.embeddable.inspectorRequestDescription",{defaultMessage:"This request queries Elasticsearch to fetch the data for the search."});inspectorRequest=_this.inspectorAdaptors.requests.start(title,{description:description});inspectorRequest.stats(Object(kibana_services["e"])(searchSource));searchSource.getSearchRequestBody().then((function(body){inspectorRequest.json(body)}));_this.updateOutput({loading:true,error:undefined});_context.prev=14;_context.next=17;return searchSource.fetch({abortSignal:_this.abortController.signal});case 17:resp=_context.sent;_this.updateOutput({loading:false,error:undefined});inspectorRequest.stats(Object(kibana_services["f"])(resp,searchSource)).ok({json:resp});_this.searchScope.$apply((function(){_this.searchScope.hits=resp.hits.hits;_this.searchScope.totalHitCount=resp.hits.total}));_context.next=26;break;case 23:_context.prev=23;_context.t0=_context["catch"](14);_this.updateOutput({loading:false,error:_context.t0});case 26:case"end":return _context.stop()}}}),_callee,null,[[14,23]])}))));_this.filterManager=filterManager;_this.savedSearch=savedSearch;_this.$rootScope=$rootScope;_this.$compile=$compile;_this.inspectorAdaptors={requests:new inspector_public["RequestAdapter"]};_this.initializeSearchScope();_this.autoRefreshFetchSubscription=Object(kibana_services["h"])().timefilter.getAutoRefreshFetch$().subscribe(_this.fetch);_this.subscription=external_kbnSharedDeps_Rxjs_["merge"](_this.getOutput$(),_this.getInput$()).subscribe((function(){_this.panelTitle=_this.output.title||"";if(_this.searchScope){_this.pushContainerStateParamsToScope(_this.searchScope)}}));return _this}_createClass(SearchEmbeddable,[{key:"getInspectorAdapters",value:function getInspectorAdapters(){return this.inspectorAdaptors}},{key:"getSavedSearch",value:function getSavedSearch(){return this.savedSearch}},{key:"render",value:function render(domNode){if(!this.searchScope){throw new Error("Search scope not defined")}this.searchInstance=this.$compile(search_template)(this.searchScope);var rootNode=external_kbnSharedDeps_Angular_default.a.element(domNode);rootNode.append(this.searchInstance);this.pushContainerStateParamsToScope(this.searchScope)}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(SearchEmbeddable.prototype),"destroy",this).call(this);this.savedSearch.destroy();if(this.searchInstance){this.searchInstance.remove()}if(this.searchScope){this.searchScope.$destroy();delete this.searchScope}if(this.subscription){this.subscription.unsubscribe()}if(this.autoRefreshFetchSubscription){this.autoRefreshFetchSubscription.unsubscribe()}if(this.abortController)this.abortController.abort()}},{key:"initializeSearchScope",value:function initializeSearchScope(){var _this2=this;var searchScope=this.searchScope=this.$rootScope.$new();searchScope.description=this.savedSearch.description;searchScope.inspectorAdapters=this.inspectorAdaptors;var searchSource=this.savedSearch.searchSource;var indexPattern=searchScope.indexPattern=searchSource.getField("index");var timeRangeSearchSource=searchSource.create();timeRangeSearchSource.setField("filter",(function(){if(!_this2.searchScope||!_this2.input.timeRange)return;return Object(data_public["i"])(indexPattern,_this2.input.timeRange)}));this.filtersSearchSource=searchSource.create();this.filtersSearchSource.setParent(timeRangeSearchSource);searchSource.setParent(this.filtersSearchSource);this.pushContainerStateParamsToScope(searchScope);searchScope.setSortOrder=function(sort){_this2.updateInput({sort:sort})};searchScope.addColumn=function(columnName){if(!searchScope.columns){return}var columns=actions_columns["a"](searchScope.columns,columnName);_this2.updateInput({columns:columns})};searchScope.removeColumn=function(columnName){if(!searchScope.columns){return}var columns=actions_columns["c"](searchScope.columns,columnName);_this2.updateInput({columns:columns})};searchScope.moveColumn=function(columnName,newIndex){if(!searchScope.columns){return}var columns=actions_columns["b"](searchScope.columns,columnName,newIndex);_this2.updateInput({columns:columns})};searchScope.filter=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(field,value,operator){var filters;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:filters=data_public["f"].generateFilters(_this2.filterManager,field,value,operator,indexPattern.id);filters=filters.map((function(filter){return _objectSpread(_objectSpread({},filter),{},{$state:{store:data_public["f"].FilterStateStore.APP_STATE}})}));_context2.next=4;return _this2.executeTriggerActions(ui_actions_public["a"],{embeddable:_this2,filters:filters});case 4:case"end":return _context2.stop()}}}),_callee2)})));return function(_x,_x2,_x3){return _ref3.apply(this,arguments)}}()}},{key:"reload",value:function reload(){this.fetch()}},{key:"pushContainerStateParamsToScope",value:function pushContainerStateParamsToScope(searchScope){var isFetchRequired=!data_public["f"].onlyDisabledFiltersChanged(this.input.filters,this.prevFilters)||!external_kbnSharedDeps_Lodash_default.a.isEqual(this.prevQuery,this.input.query)||!external_kbnSharedDeps_Lodash_default.a.isEqual(this.prevTimeRange,this.input.timeRange)||!external_kbnSharedDeps_Lodash_default.a.isEqual(searchScope.sort,this.input.sort||this.savedSearch.sort);searchScope.columns=this.input.columns||this.savedSearch.columns;searchScope.sort=this.input.sort||this.savedSearch.sort;searchScope.sharedItemTitle=this.panelTitle;if(isFetchRequired){this.filtersSearchSource.setField("filter",this.input.filters);this.filtersSearchSource.setField("query",this.input.query);this.fetch();this.prevFilters=this.input.filters;this.prevQuery=this.input.query;this.prevTimeRange=this.input.timeRange}else if(this.searchScope){this.searchScope.$applyAsync()}}}]);return SearchEmbeddable}(embeddable_public["a"])},463:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return addColumn}));__webpack_require__.d(__webpack_exports__,"c",(function(){return removeColumn}));__webpack_require__.d(__webpack_exports__,"b",(function(){return moveColumn}));function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function buildColumns(columns){if(columns.length>1&&columns.indexOf("_source")!==-1){return columns.filter((function(col){return col!=="_source"}))}else if(columns.length!==0){return columns}return["_source"]}function addColumn(columns,columnName){if(columns.includes(columnName)){return columns}return buildColumns([].concat(_toConsumableArray(columns),[columnName]))}function removeColumn(columns,columnName){if(!columns.includes(columnName)){return columns}return buildColumns(columns.filter((function(col){return col!==columnName})))}function moveColumn(columns,columnName,newIndex){if(newIndex<0||newIndex>=columns.length||!columns.includes(columnName)){return columns}var modifiedColumns=_toConsumableArray(columns);modifiedColumns.splice(modifiedColumns.indexOf(columnName),1);modifiedColumns.splice(newIndex,0,columnName);return modifiedColumns}}}]);